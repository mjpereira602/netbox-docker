FROM netboxcommunity/netbox:v3.3.8-2.3.0

COPY ./requirements-container-plugins.txt /
RUN /opt/netbox/venv/bin/pip install --no-warn-script-location -r /requirements-container-plugins.txt

COPY configuration/configuration.py /etc/netbox/config/configuration.py
COPY configuration/plugins.py /etc/netbox/config/plugins.py

RUN SECRET_KEY="dummydummydummydummydummydummydummydummydummydummy" /opt/netbox/venv/bin/python /opt/netbox/netbox/manage.py collectstatic --no-input
