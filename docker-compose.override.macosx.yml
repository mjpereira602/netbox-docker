version: '3.4'
services:
  netbox: &netbox
    volumes:
    - ./startup_scripts:/opt/netbox/startup_scripts:ro
    - ./initializers:/opt/netbox/initializers:ro
    - ./configuration:/etc/netbox/config:ro
    - ./reports:/etc/netbox/reports:ro
    - ./scripts:/etc/netbox/scripts:ro
    - netbox-media-files:/opt/netbox/netbox/media:rw
  netbox-worker:
    <<: *netbox
  netbox-housekeeping:
    <<: *netbox
  postgres:
    volumes:
    - netbox-postgres-data:/var/lib/postgresql/data:rw
    - ./postgres_init.d:/docker-entrypoint-initdb.d:ro
  redis:
    volumes:
    - netbox-redis-data:/data:rw
